<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Maniac Clic</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Exo+2:wght@300;400;600;700&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- Подключаем THREE.js и загрузчик для 3D-моделей (GLTFLoader) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <!-- Подключаем Chart.js для графика игры Краш -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Анимированный фон (общий для всех экранов) -->
    <div class="background-gradient"></div>
    <div id="background-stars"></div>

    <!-- ЗАГРУЗОЧНЫЙ ЭКРАН -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-container">
            <div class="loading-star">
                <div class="star-core"></div>
                <div class="star-rays">
                    <div class="ray ray-1"></div>
                    <div class="ray ray-2"></div>
                    <div class="ray ray-3"></div>
                    <div class="ray ray-4"></div>
                    <div class="ray ray-5"></div>
                    <div class="ray ray-6"></div>
                    <div class="ray ray-7"></div>
                    <div class="ray ray-8"></div>
                </div>
            </div>
            <div class="loading-text">
                <h2>Maniac Clic</h2>
                <div class="loading-bar">
                    <div class="loading-progress"></div>
                </div>
                <p class="loading-message">Загружаем звёзды...</p>
            </div>
            <div class="loading-particles">
                <div class="particle particle-1"></div>
                <div class="particle particle-2"></div>
                <div class="particle particle-3"></div>
                <div class="particle particle-4"></div>
                <div class="particle particle-5"></div>
            </div>
        </div>
    </div>

    <!-- ЭКРАН ИГРЫ -->
    <div id="game-screen" class="screen hidden">
        <div class="container">
            <!-- Верхняя часть: Баланс -->
            <div class="balance-container">
                <svg class="balance-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>
                <span id="balance-counter">0</span>
            </div>

            <!-- Центральный элемент: Контейнер для 3D-звезды -->
            <div class="star-wrapper">
                <!-- Контейнер для 3D-сцены -->
                <div id="star-container"></div>
            </div>

            <!-- Нижняя часть: Энергия -->
            <div class="energy-container">
                <div class="energy-info">
                    <span>Энергия</span>
                    <span id="energy-counter">200/200</span>
                </div>
                <div class="energy-bar-wrapper">
                    <div id="energy-bar" class="energy-bar-fill"></div>
                </div>
            </div>

            <!-- Навигация -->
            <nav class="navigation">
                <button id="go-to-crash" class="nav-button">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/></svg>
                    <span>Краш</span>
                </button>
                <button id="go-to-withdraw" class="nav-button">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12V7H5a2 2 0 0 1 0-4h14v4"/><path d="M3 5v14a2 2 0 0 0 2 2h16v-5"/><path d="M18 12a2 2 0 0 0 0 4h4v-4Z"/></svg>
                    <span>Вывод</span>
                </button>
            </nav>
        </div>
    </div>

    <!-- ЭКРАН ИГРЫ КРАШ -->
    <div id="crash-screen" class="screen hidden">
        <div class="container crash-container">
            <!-- Заголовок экрана -->
            <div class="crash-header">
                <button id="back-from-crash" class="back-button">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>
                    <span>Назад</span>
                </button>
                <h1 class="crash-title">
                    <svg class="title-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/></svg>
                    Краш
                </h1>
                <div class="crash-balance">
                    <svg class="balance-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>
                    <span id="crash-balance">0</span>
                </div>
            </div>

            <!-- Основной игровой блок -->
            <div class="crash-game-area">
                <!-- Статус игры -->
                <div class="game-status" id="game-status">Идет прием ставок</div>
                
                <!-- Центральный дисплей множителя -->
                <div class="multiplier-display" id="multiplier-display">1.00x</div>
                
                <!-- График -->
                <div class="chart-container">
                    <canvas id="crash-chart" width="400" height="200"></canvas>
                </div>
            </div>

            <!-- Панель управления ставками -->
            <div class="betting-panel">
                <div class="bet-input-section">
                    <div class="bet-input-group">
                        <input type="number" id="bet-amount" class="bet-input" value="10" min="1" step="1">
                        <div class="bet-modifiers">
                            <button class="bet-modifier" id="bet-half">/2</button>
                            <button class="bet-modifier" id="bet-double">x2</button>
                        </div>
                    </div>
                    
                    <div class="quick-bet-buttons">
                        <button class="quick-bet" data-amount="10">10</button>
                        <button class="quick-bet" data-amount="50">50</button>
                        <button class="quick-bet" data-amount="100">100</button>
                        <button class="quick-bet" data-amount="500">500</button>
                    </div>
                </div>
                
                <button class="main-action-button" id="main-action-btn">Сделать ставку</button>
            </div>

            <!-- История раундов -->
            <div class="history-section">
                <h3 class="history-title">История крашей</h3>
                <div class="history-list" id="history-list">
                    <!-- История будет заполняться динамически -->
                </div>
            </div>
        </div>
    </div>

    <!-- ЭКРАН ВЫВОДА -->
    <div id="withdraw-screen" class="screen hidden">
        <div class="container withdraw-container">
            <!-- Заголовок с кнопкой назад -->
            <div class="withdraw-header">
                <button id="back-from-withdraw" class="back-button">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>
                    <span>Назад</span>
                </button>
                <h1 class="withdraw-title">
                    <svg class="title-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>
                    Вывод звёзд
                </h1>
            </div>

            <!-- Карточка баланса -->
            <div class="balance-card">
                <div class="balance-header">
                    <svg class="balance-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>
                    <span class="balance-label">Ваш баланс</span>
                </div>
                <div class="balance-amount" id="withdraw-balance">0</div>
                <div class="balance-subtitle">Доступно для вывода</div>
            </div>

            <!-- Секция выбора суммы -->
            <div class="amount-selection">
                <h3 class="section-title">Выберите сумму</h3>
                <div id="withdraw-buttons-container" class="withdraw-buttons-grid"></div>
            </div>
            
            <!-- Информация о выводе -->
            <div id="withdraw-info" class="withdraw-info hidden">
                <div class="info-card">
                    <div class="info-header">
                        <svg class="info-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
                        <span>Детали вывода</span>
                    </div>
                    <div class="info-content">
                        <p id="withdraw-status-text" class="status-text"></p>
                        <div class="withdraw-summary">
                            <div class="summary-row">
                                <span class="summary-label">Сумма вывода:</span>
                                <span class="summary-value" id="withdraw-amount">0</span>
                            </div>
                            <div class="summary-row">
                                <span class="summary-label">Комиссия:</span>
                                <span class="summary-value commission" id="withdraw-commission">0</span>
                            </div>
                            <div class="summary-row total">
                                <span class="summary-label">Итого списано:</span>
                                <span class="summary-value" id="withdraw-total">0</span>
                            </div>
                        </div>
                    </div>
                </div>
                <button id="withdraw-confirm-button" class="confirm-button hidden">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
                    <span>Подтвердить вывод</span>
                </button>
            </div>

            <!-- Статистика выводов -->
            <div class="withdraw-stats">
                <div class="stat-item">
                    <div class="stat-icon">📊</div>
                    <div class="stat-content">
                        <div class="stat-value" id="withdraws-today">0/2</div>
                        <div class="stat-label">Выводов сегодня</div>
                    </div>
                </div>
                <div class="stat-item">
                    <div class="stat-icon">⏰</div>
                    <div class="stat-content">
                        <div class="stat-value">24ч</div>
                        <div class="stat-label">Лимит обновляется</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ОБЩИЕ ЭЛЕМЕНТЫ -->
    <div id="notification" class="notification hidden">Энергия восстанавливается...</div>

    <div id="success-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2>Успешно!</h2>
            <p id="success-message">⭐ 1 звёзд зачислены в бота.</p>
        </div>
    </div>

    <script src="main.js"></script>
</body>
</html>

